<html>
  <head>
    <title>Surfer Health Survey</title>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
	<link rel="stylesheet" href="css/orig/web.css" type="text/css" />
	<link rel="stylesheet" href="css/orig/natived/font-awesome.min.css" />
                // jQueryMobileCSS - original without styling 
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.css" />
                // nativeDroid core CSS 
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.nativedroid.css" />
                // nativeDroid: Light/Dark 
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.nativedroid.dark.css"/>
                // nativeDroid: Color Schemes 
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.nativedroid.color.blue.css" />
	<link rel="stylesheet" type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css" /> 
	// new native stylesheet
	<!-- 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
        <link rel="stylesheet" href="css/jqm-icon-pack-fa.css" /> 
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.nativedroid.css" />
        <link rel="stylesheet" href="css/orig/natived/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.css" />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.dark.css"  id='jQMnDTheme' />
        <link rel="stylesheet" href="css/jquerymobile.nativedroid.color.green.css" id='jQMnDColor' />
	// -->
        <meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <div data-role="page" data-theme="b" id="one">
	<div data-role="header" data-theme="b" id="header" class="ui-corner-top"></div> 
	<div id="content"></div>
	<!--
	<div id="landing" data-theme="b">
	      <ul id="landList" data-role="listview">
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:6%; left:.9em;" src="img/surveyIcon.png">  <a id='landingSurvey'><h1><center><span class="liDown"><br>Sign In/Enroll</span></center></h1></a></li>
	        <li class="boxed2">  <img style="width:5.3em; position:fixed; top:33%; left:.7em;" src="img/mapIcon.png">  <a id='landingSurf'><h1><center><span class="liDown"><br>Find a Surf Spot</span></center></h1></a></li>
	        <li class="boxed2">  <img style="width:5.3em; position:fixed; top:58%; left:.7em;" src="img/mailIcon.png">  <a id='landingContact'><h1><center><span class="liDown"><br>Contact Us</span></center></h1></a></li>
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:84%; left:.7em;" src="img/faqIcon.png">  <a id='landingFAQ'><h1><center><span class="liDown"><br>FAQ</span></center></h1></a></li>
	     </ul>
	 </div>
	 // -->
	 <div data-role="footer" data-theme="b" id="footer">
    <div> 
    <div id="popupInfo" data-role="popup" class="ui-content" data-position-to="window">Popup</div>
    <div id="popupTip" data-role="popup" class="ui-content" data-position-to="#footer">Tip</div>
	<script src="js/orig/jquery-1.9.1.min.js"></script>
	<script src="js/orig/jquery.mobile-1.3.1.min.js"></script>
	<script src="js/vendor/underscore-min.js"></script>
	<script src="js/vendor/backbone-min.js"></script>
	<script src="js/vendor/backbone.dualstorage.js"></script>
	<script src="js/vendor/json2.js"></script>
	<script src="js/vendor/chance.min.js"></script>
	<script type="text/javascript" src="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.min.js"></script>
	<script type="text/template" id="tpl-contact-details">
    		<div><p>If you have any questions, comments, or concerns about this application feel free to email us at <br><br><a href="mailto:shs@sccwrp.org">shs@sccwrp.org</a></p>
		</div>
	</script>
    	<script type="text/template" id="tpl-intro-details">
	  <div id="landing" data-theme="b">
	    <ul id="landList" data-role="listview">
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:6%; left:.9em;" src="img/surveyIcon.png">  <a id='landingSurvey'><h1><center><span class="liDown"><br>Sign In/Enroll</span></center></h1></a></li>
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:33%; left:.7em;" src="img/mapIcon.png">  <a id='landingSurf'><h1><center><span class="liDown"><br>Find a Surf Spot</span></center></h1></a></li>
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:58%; left:.7em;" src="img/mailIcon.png">  <a id='landingContact'><h1><center><span class="liDown"><br>Contact Us</span></center></h1></a></li>
		<li class="boxed2">  <img style="width:5.3em; position:fixed; top:84%; left:.7em;" src="img/faqIcon.png">  <a id='landingFAQ'><h1><center><span class="liDown"><br>FAQ</span></center></h1></a></li>
	    </ul>
	  </div>
	</script>
	<script type="text/template" id="tpl-login-details">
		<div id="formLogin" class="form-left-col" data-theme="a" class="ui-corner-all" data-change-hash="false">
                         <div data-role="header" data-theme="b" class="ui-corner-top"></div>
                         <div data-role="content" data-theme="b" class="ui-corner-bottom ui-content">
			<fieldset>
			<h3>New to the study?</h3>
                          <a href="#" name="enrollBtn" id="enrollBtn" data-theme="b" data-role="button">Enroll</a>
			  <h3>Already enrolled?</h3>
			  <label for="loginInput" class="ui-hidden-accessible">Email or Telephone</label>
			  <div id="inputHolder">
                          	<input type="text" name="loginInput" id="loginInput" value="" placeholder="Email or Telephone" data-theme="b" />
			  </div>
                          <a href="#" name="loginBtn" id="loginBtn" data-theme="b" data-role="button">Sign In</a>
			</fieldset>
			</div>
	</div>
	</script>
	<script type="text/template" id="tpl-faq-details">
	<div id="formFAQ" class="form-left-col">
		<div data-role="collapsible-set">
			<% _.each(FAquestions, function(question) { %> 
			<div data-role="collapsible" data-collapsed="true">
				<h4><%= question.title %></h4>
				<p><%= question.content %></p>
			</div>
			<% }); %>  
		</div>
	</script>
	<script type="text/template" id="tpl-footer-details">
	 <div id="progBars" class="boxed">
	   <form>
 	    <fieldset id="footButtons" class="ui-grid-b">
		<div id="back" class = "ui-block-a"><a href="#" data-role="button" id="backButton"><div id='backButtonText'>Back</div></a></div>
		<div id="restartButton" class = "ui-block-b"><a href="./index.html" data-role="button" id="saveRestartButton">Restart</a></div> 
		<div id="forward" class = "ui-block-c"><a href="#" data-role="button" id="multi"><div id='multiButtonText' >Next</div></a></div>
	    </fieldset>
	   </form>
	   <fieldset id="topBars" class="ui-grid-a"><div id="modLabel" class = "ui-block-a"><p>Section (%):</p></div>
	     <div id="Mod-bar" class = "ui-block-b"><input type="range" name="slider2" id="Modprogress-bar" value="0" min="0" max="100" data-highlight="true"></div>
	   </fieldset>
	   <fieldset id="botBars" class="ui-grid-a"><div id="fullLabel" class = "ui-block-a"><p>Total (%):</p></div>
	     <div id="Full-bar" class = "ui-block-b"><input type="range" name="slider2" id="Fullprogress-bar" value="0" min="0" max="100" data-highlight="true"></div>
     	   </fieldset>
	  </div>
	</script>
	<script type="text/template" id="tpl-header-details">
		<h1 id="question" class="ui-title" role="heading" aria-level="1">Surfer Health Survey</h1>
		<a href="./index.html" id="home" data-role="button" data-icon="home" class="ui-btn-right">Home</a>
	</script>
	<script type="text/template" id="tpl-question-details">
		<h1 id="question" class="ui-title" role="heading" aria-level="1"><%= title %></h3></h1>
	</script>
	<script type="text/template" id="tpl-map-details">
    		<div class="form-left-col"><h3>Map Content</h3></div>
	</script>
	<script type="text/template" id="tpl-dialog-details">
			<li class="edit" name="edit" id="<%= id %>"><%= id %> - <%= timestamp %></li>
	</script>
	<script type="text/template" id="tpl-history-details">
			//<li class="history" name="history" id="<%= id %>"><%= qtext %></li>
		<ul data-role="listview" data-inset="true">
		<% _.each(elements,function(element,index,list) {  %>
		<% if(!element) return;  %>
			//<li data-role="list-divider">ID: <%= qindex %></li>
			<li data-icon="edit"><a href="#" class="edit" name="edit" id="<%= index %>"><%= element %></a></li>
		<% }); %>
		</ul>
		<a href="#" id="finish" data-role="button" class="finish">Looks Good</a>
	</script>
	<script type="text/template" id="tpl-receipt-details">
    	<div id="aid" class="form-center-col"><h3>Session Receipt - Click Answer to Edit</h3>
		<ul data-role="listview" data-inset="true">
		<% _.each(elements,function(element,index,list) {  var qindex = index.substr(1); %>
		<% if(!element) return;  %>
			<li data-role="list-divider">Question <%= qindex %></li>
			<li data-icon="edit"><a href="#" class="edit" name="edit" id="<%= index %>"><%= element %></a></li>
		<% }); %>
		</ul>
		<a href="#" id="finish" data-role="button" class="finish">Looks Good</a>
	</div>
	</script>
	<script type="text/template" id="tpl-answer-details">
	  <% if((type) == "radio"){ %>
	  <!-- 
	  <h3>Radio Question - <%= qcount %> - <%= type %></h3>
		<input type="text" id="uid" value="<%= user_id %>" disabled />
         	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
          	<label>Question ID:</label>
         	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		<button id="save" class="save">Save</button>
	  // -->
		<% if(decline == "yes") { %>
			<button id="decline" class="decline">Decline and save</button>
			<% }; %>
		    <% if((qcount) == 5){ %>
			    <div id="consent" style="display: inline; visibility: visible;"> 
				    <div id="formImages">
					    <% if (isDevice){ $('#printConsent').css('display','none'); %>
						<img width=95% src="img/Consent_Large_Page_1.jpg">
						<img width=95% src="img/Consent_Large_Page_2.jpg">
						<img width=95% src="img/Consent_Large_Page_3.jpg">
						<img width=95% src="img/Consent_Large_Page_4.jpg">
					    <%  } else { %>
					    	<img width=65% src="img/Consent_1.jpg">
					    	<img width=65% src="img/Consent_2.jpg">
					    	<img width=65% src="img/Consent_3.jpg">

					    <% }; $('#consent').css('display','inline'); $('#consent').css('visibility','visible'); %>
				    </div>
				    <br>
				    <form>
					    <a href="img/Consent.pdf" target="_blank" data-inline=true data-role="button" id="printConsent">Print/Download</a>
				    </form>
				    <h3>Do you agree to the terms above?</h3>
			    </div>
			    <% }; %>
	  <div id="multi-radio" class="ui-field-contain" data-role='fieldcontain'>
	   <form id ="aid" >
	    <div style="margin: 0 auto; display: table; width: 19em; position:relative;">
		    <fieldset data-role="controlgroup" data-type="horizontal" data-role="fieldcontain" data-mini="true">
			<% for(i=0; i < menu.length; i++) { %>
			 <label class="radioClassLabel" id= <%= "radioLabel-" + String.fromCharCode(97 + i)  %> >
			 <input type="radio" id="radio-ID" name="radioSelect" value= <%= menu[i] %> />
			 <span class="ui-btn-inner"><span class="ui-btn-text" id= <%= "radio-text-" + String.fromCharCode(97 +i)  %> > <%= menu[i] %> </span></span></label>
			<% }; %>
		</fieldset>
	    </div> 
	   </form>
	 </div>
	  <% } else if ((type) == "numberSelect"){  %>
	  	<!-- 
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
		// -->
		<div class="ui-field-contain" data-inset="true">
		  <input type="number" id="aid">
    		  <select name="aid" id="aidscale">
		  <% var dates = menu; %>
		  <% for(i=0;i < menu.length;i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		 <% }; %>
		</div>
	  <% } else if ((type) == "multi"){  %>
	  <div class="form-left-col">
	    <div data-role="fieldcontain">
		<!-- <h3>Multi Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
		// -->
		<div class="ui-field-contain ui-body ui-br" data-inset="true">
			<fieldset data-role="controlgroup" id="aid">
			<legend>Select all that apply: </legend>
			<% for(i=0; i < menu.length; i++) { %>
			<input type="checkbox" class="custom" value= <%= menu[i] %>  name = <%= "multi-checkbox-" + i.toString() %> id= <%= "multi-checkbox-" + i.toString() %> />
				<label for=<%= "multi-checkbox-" + i.toString()  %> >  <%= menu[i] %> </label> 
	 		<% }; %>
			</fieldset>
		</div>
        	<button id="save" class="save">Save</button>
	    </div>
	  <% } else if ((type) == "select"){  %>
	  <div class="form-left-col">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset class="ui-field-contain">
    		  <select name="aid" id="aid" class="selectClass">
		  <% for(i=0; i < menu.length; i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		  <% }; %>
    		  </select>
        	<button id="save" class="save">Save</button>
    	    </div>
	  <% } else if ((type) == "dateSelect"){  %>
	  <div class="form-left-col">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset class="ui-field-contain">
		  <% var dates = q25.split(","); %>
		  <% for(j=0; j < dates.length; j++) { %>
		  <h3 id="date"> <%= dates[j] %> </h3>
		  <select name= "<%= j %>" id="aid">
		  <% for(i=0; i < menu.length; i++) { %>
		 	 <option value= "<%= menu[i] %>" > <%= menu[i] %> </option>
		  <% }; %>
    		  </select>
		  <% }; %>
	 	 </fieldset>
		 <% var script = "$('[name=0]').on('change', function() {$('[id=aid]').each(function() {$(this).val($('[name=0]').val())})})" %>
		 <%= "<script" + ">" + script + "</script" + ">"%> 
	  <% } else if ((type) == "dateTimeInterval"){  %>
	  <div class="form-left-col">
		<!-- <h3>Select Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
		// -->
		<fieldset class="ui-field-contain">
		  <% var dates = q25.split(","); %>
		  <% var AmArray = _.range(48).map(function(x) {if(x<4) x=x+48; return Math.floor(x/4) + ":" + ["00", 15, 30, 45][x % 4] + " AM";}); %>
		  <% var PmArray = _.range(48).map(function(x) {if(x<4) x=x+48; return Math.floor(x/4) + ":" + ["00", 15, 30, 45][x % 4] + " PM";}); %> 
		  <% var TimeArray = AmArray.concat(PmArray); %>
		  <%= "<script" + "> TimeArray = [" + ("'" + TimeArray.join("','") + "'").split(",") + "];</script" + ">" %>
		  <% for(j=0; j < dates.length; j++) { %>
		  <h3 id="date"> <%= dates[j] %> </h3>
		  <select name= <%=  "enter" + j  %> id="aid" class="enter">
			  <option id="0" value="Select One">Select One</option>
		  <% for(i=0; i < TimeArray.length; i++) { %>
		 	 <option id= <%= i %> value="<%= TimeArray[i] %>" > <%= TimeArray[i] %> </option>
		  <% }; %> 
		  </select>
		  <select name = <%= "exit" + j  %> id="aid" class="exit">
			  <option id="0" value="Select One">Select One</option>
		  </select>
		  <% var script = "(function(){var start = $('[name=enter" + j + "]');start.on('change', function() {var index = start.children(':selected').attr('id');var end = $('[name=exit" + j + "]');end.find('option').remove();end.append($('<option></option>').attr('value', 'Select One').text('Select One'));for(i=Number(index)+1; i < 96; i++) {end.append($('<option></option>').attr('value', TimeArray[i]).text(TimeArray[i]));};});})();" %>
		  <%= "<script" + ">" + script + "</script" + ">" %>
		  <% }; %>
		</fieldset>
		<% var propagate1 = "$('[name=enter0]').on('change', function() {$('.enter').not('[name=enter0]').each(function () {$(this).val($('[name=enter0]').val());$(this).trigger('change');})});" %>
		<% var propagate2 = "$('[name=exit0]').on('change', function() {$('.exit').each(function () {$(this).val($('[name=exit0]').val())})});" %>
		<%= "<script" + ">" + propagate1 +  "</script" + ">" %>
		<%= "<script" + ">" + propagate2 +  "</script" + ">" %>
	  <% } else if ((type) == "text"){  %>
	  <div class="ui-field-contain">
		<!--
		<h3>Text Question - <%= qcount %> - <%= type %></h3>
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
        	<label>Record ID:</label>
        	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
        	<label>Question ID:</label>
        	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
        	<label>Answer</label>
		// -->
        	<input type="text" id="aid" name="aid" value="" required/>
		<!-- <button id="save" class="save">Save</button> // -->
		<% if(decline == "yes") { %>
			<button id="decline" class="decline">Decline and save</button>
			<% }; %>
    	    </div>
	  <% } else if (type == "sevenday"){  %>
	  	<!-- 
         	<label>User ID:</label>
          	<input type="text" value="<%= user_id %>" disabled />
          	<label>Record ID:</label>
          	<input type="text" id="rid" name="rid" value="<%= id %>" disabled />
          	<label>Question ID:</label>
          	<input type="text" id="qid" name="qid" value="<%= qcount %>" disabled />
          	<label>Answer</label>
		// -->
		<div id="multi-view">
		  <div class="ui-field-contain" data-inset="true">
			<fieldset data-role="controlgroup" id="aid">
			<legend>Select all that apply: </legend>
			<% today = new Date; %>
			<% days = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; %>
			<% days = days.slice(0, today.getDay() + 1 ).reverse().concat(days.slice(today.getDay() + 1, 7).reverse()); %>
			<% days[0] = "Today";	 %>
			<% for(i=0; i < 7; i++) { %>
			<input type="checkbox" class="custom" value= <%= today.getMonth() + "/" + (today.getDate() - i) + "/" + (today.getYear() + 1900)  %>  name = <%= days[i] %>  id= <%= days[i] %> />
			<label for= <%= days[i] %> >  <%= days[i] %> </label> 
	 		<% }; %>
			<% if(qcount == "25" && decline == "yes") { %>
			<!-- <input type="button"  name="decline" id="decline" class="decline">Did not Enter</input> // -->
				<input type="checkbox" class="decline" value="decline" name="decline" id="decline" />
				<label for="decline" class="decline">Did not Enter</label> 
			<% }; %>
			</fieldset>
		  </div>
		</div>
	  <% } %>
	</script>
	<script src="js/globals.js"></script>
	<script src="js/models/Answer.js"></script>
	<script src="js/models/Gift.js"></script>
	<script src="js/models/History.js"></script>
	<script src="js/models/Question.js"></script>
	<script src="js/models/User.js"></script>
	<script src="js/models/FAQ.js"></script>
	<script src="js/models/Receipt.js"></script>
	<script src="js/views/AnswerListView.js"></script>
	<script src="js/views/ContactView.js"></script>
	<script src="js/views/DialogView.js"></script>
	<script src="js/views/FAQView.js"></script>
	<script src="js/views/FooterView.js"></script>
	<script src="js/views/HeaderView.js"></script>
	<script src="js/views/HistoryView.js"></script>
	<script src="js/views/IntroView.js"></script>
	<script src="js/views/LoginView.js"></script>
	<script src="js/views/MapView.js"></script>
	<script src="js/views/QuestionListView.js"></script>
	<script src="js/views/ReceiptView.js"></script>
	<script src="js/views/UserView.js"></script>
	<script src="js/collections/AnswerList.js"></script>
	<script src="js/collections/QuestionList.js"></script>
	<script src="js/collections/ReceiptList.js"></script>
	<script src="js/collections/FAQList.js"></script>
	<script src="js/application.js"></script>
    <script type="text/javascript">
        var jqmCSS;
        var deviceCSS;
        var deviceType = (navigator.userAgent.match(/iPad/i))  == "iPad" ? "iPad" : (navigator.userAgent.match(/iPhone/i))  == "iPhone" ? "iPhone" : (navigator.userAgent.match(/Android/i)) == "Android" ? "Android" : (navigator.userAgent.match(/BlackBerry/i)) == "BlackBerry" ? "BlackBerry" : "null";
        if((deviceType == "iPad" || deviceType == "iPhone")){
            $('#Mod-bar').css('width','60%');
            $('#Full-bar').css('width','60%');
            $('#modLabel').css('width','110px');
            $('#fullLabel').css('width','110px');
        } else if (deviceType == "Android"){
            $('#Mod-bar').css('width','60%');
            $('#Full-bar').css('width','60%');
            $('#modLabel').css('width','110px');
            $('#fullLabel').css('width','110px');
        } else {
            jqmCSS = "css/orig/jquery.mobile.structure-1.3.1.min.css";
            deviceCSS = "css/orig/SCCWRPMobile.min.css";
        }
  </script>
  </body>
</html>
